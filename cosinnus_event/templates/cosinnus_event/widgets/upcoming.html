{% load i18n cosinnus_tags %}

{% if events %}
    {% include 'cosinnus_event/attached_events.html' with events=events no_indent=1 %}
{% else %}
    <div type="button" class="btn btn-emphasized dashboard-appwidget-contentline">
        <ul class="media-list">
            <li class="media">
                <a class="pull-left" href="#">
                    <i class="fa fa-tasks"></i>
                </a>
                <div class="media-body">
                    {% trans "There are no upcoming events" %}
                </div>
            </li>
        </ul>
    </div><!-- btn -->
{% endif %}


<script type="text/javascript">
    var cosinnus_calendarWidgetEvents = [
        {% for event in all_upcoming_events %}
            {% if event.from_date %}
            {
                title: $.cosinnus.decodeEntities('{{ event.title }}'),
                start: moment("{{ event.from_date|date:"c"}}"),
                {% if event.to_date %}
                end: moment("{{ event.to_date|date:"c"}}"),
                {% endif %}
                url: '{% group_url "cosinnus:event:event-detail" group=event.group slug=event.slug %}'
            },
            {% endif %}
        
        {% endfor %}
    
    ];

    $.cosinnus.fullcalendar();
</script>
